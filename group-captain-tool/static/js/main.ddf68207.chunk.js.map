{"version":3,"sources":["client/Config.js","client/Exportable.js","client/GroupLibrary.js","client/RemoteApi.js","client/Client.js","client/DayEditorState.js","client/GroupEditorState.js","client/Localization.js","client/SearchParams.js","components/Calendar.js","components/Screens.js","components/PersonItem.js","client/Utils.js","components/PeopleChecker.js","components/GroupEditor.js","App.js","reportWebVitals.js","index.js"],"names":["config","defaultGroupName","locale","localApiUrl","window","location","pathname","substring","indexOf","rootApiUrl","usernameCookieName","passwordCookieName","createTestData","themes","sitename","blankImage","Exportable","this","arrayItemsClasses","dictItemsClasses","propertyExceptions","concat","dict","Object","assign","JSON","parse","stringify","smartExport","smartImport","data","forEach","propertyKey","assignDict","keys","arrayKey","importArray","dictKey","importDict","rawData","convertToDict","exportArray","exportDict","arrayOfExportables","rawArray","Array","from","map","x","exportData","rawDataArray","exportableItemClass","array","importData","rawDict","key","rawDictData","Person","name","links","avatar","uid","DayData","registerClasses","checkedPeopleUids","GroupData","people","nextPersonUID","person","updateNextPersonUID","push","splice","sort","a","b","nameA","toLowerCase","nameB","RemoteApi","username","password","userCaptainGroup","callback","apiRequestUrl","fetch","then","req","json","catch","reason","console","log","error","e","exportableData","postData","mainPostData","formData","FormData","append","method","body","exportableClass","defaultValue","exportable","groupName","makeGetDataRequest","group","addPerson","createDefaultGroup","groupData","makeWriteRequest","group_name","success","dayTimestamp","day","createDefaultDay","dayData","day_timestamp","Client","api","loggedIn","Cookies","get","logIn","set","saveCookies","DayEditorState","currentDayTimestamp","createTodayTimestamp","currentDayDate","Date","onDayDataChanged","EventHandler","getDayData","getCurrentDayTimestamp","publish","bind","writeDayData","date","getFullYear","getMonth","getDate","getTime","GroupEditorState","currentGroupName","onGroupDataChanged","getGroup","writeGroup","localization","translationTable","currentLocale","csvText","translationMatrix","CSV","locales","slice","i","length","message","localeIndex","parseTranslationTable","translate","loadTranslationFromCSV","searchParams","current_day_timestamp","toString","addEventListener","event","replaceParams","params","value","url","href","replace","results","RegExp","exec","decodeURIComponent","getParameterByName","URLSearchParams","search","history","replaceState","CalendarComponent","props","state","selectedDate","app","dayEditorState","onDateChange","setCurrentDayTimestamp","groupEditorState","setState","className","onChange","React","Component","ScreenChangeButton","onClick","goToScreen","screen","text","ScreenScaffold","headerItems","WaitingScreen","LogInScreen","usernameInputRef","createRef","passwordInputRef","onLogInClicked","current","client","logInWithFields","App","ScreenEnum","Homepage","ref","type","placeholder","required","HomepageScreen","PeopleChecker","PeopleEditor","toggleTheme","FloatingScreen","isHidden","hide","hiddenClass","children","addFixedChars","char","numberOfChars","before","addNum","Math","max","PersonCheckState","checked","PeopleCheckerScreen","peopleCheckList","builCheckList","onCheckListChanged","showCheckedPeople","showUncheckedPeople","createPeopleCheckList","checkList","peopleUids","personCheckState","subscribe","unsubscribe","forceUpdate","updateDayData","save","list","filter","join","showClipboardWithText","dateText","dateVerboseText","titleDate","PersonCheckItem","toggleCheck","siteId","target","itemActiveClassName","checkButtonActiveClassName","src","renderLinks","GroupEditorScreen","onPersonChanged","showPeopleNamesList","showPeopleDataJson","startEditingPerson","personEditorRef","floatingScreenRef","newPerson","show","startEditing","floatingScreen","PropertyInput","obj","propKey","autoComplete","PersonEditorScreen","personCopy","realPerson","onChangedAvatar","onDeletePressed","onSavePressed","onAvatarError","avatarRef","removePerson","onError","PersonItem","currentScreen","Waiting","currentRoute","routerRef","onDataChanged","readSearchData","clipboardRef","theme","updateParams","setCurrentGroup","tryLoginWithCookies","LogIn","tryToLogInWithRedirect","tryToLogInInBackground","tryToLogin","ScreenRoutes","route","getScreenRoute","goToRoute","routeId","pushToHistory","document","title","path","freeze","ClipboardPanel","handleChange","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ddf68207.chunk.js","sourcesContent":["var USEGLOBALAPI = false\r\n\r\nvar sitepath = window.location.pathname.substring(0, window.location.pathname.indexOf(\"/\", 1))\r\n\r\nvar config = {\r\n    defaultGroupName: \"ИНБО-12-21\",\r\n    locale: \"ru\",\r\n    localApiUrl: sitepath+\"/api/\",\r\n    rootApiUrl: \"/api/\",\r\n    usernameCookieName: \"username\", \r\n    passwordCookieName: \"password\", \r\n    createTestData: true,\r\n    themes: [\"light\", \"dark\"],\r\n    sitename: \"group-captain-tool\",\r\n    blankImage: \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\",\r\n}\r\nif(USEGLOBALAPI){\r\n    var hostUrl = \"http://ashen-hermit.42web.io\"\r\n    config.localApiUrl = hostUrl + config.localApiUrl\r\n    config.rootApiUrl = hostUrl + config.rootApiUrl\r\n}\r\n\r\nexport { config }","export class Exportable{\r\n    constructor(){\r\n        this.arrayItemsClasses={}\r\n        this.dictItemsClasses={}\r\n        this.propertyExceptions=[\"arrayItemsClasses\", \"dictItemsClasses\", \"propertyExceptions\"]\r\n    }\r\n    /**\r\n     * \r\n     * @param {Dict<Exportable>} arrayItemsClasses\r\n     * @param {Dict<Exportable>} dictItemsClasses\r\n     * @param {Array<String>} propertyExceptions\r\n     * @returns this\r\n     */\r\n     registerClasses(arrayItemsClasses=null, dictItemsClasses=null, propertyExceptions=null){\r\n        this.arrayItemsClasses = arrayItemsClasses\r\n        this.dictItemsClasses = dictItemsClasses\r\n        if(propertyExceptions!=null) this.propertyExceptions = this.propertyExceptions.concat(propertyExceptions)\r\n    }\r\n\r\n    static exportArray(arrayOfExportables){\r\n        var rawArray = Array.from(arrayOfExportables)\r\n        rawArray = rawArray.map(x=>x.exportData())\r\n        return rawArray\r\n    }\r\n    static importArray(rawDataArray, exportableItemClass){\r\n        var array = Array.from(rawDataArray)\r\n        array = array.map(rawData=>new exportableItemClass().importData(rawData))\r\n        return array\r\n    }\r\n    static exportDict(dict){\r\n        var rawDict = Object.assign({}, dict)\r\n        Object.keys(dict).forEach(key => {\r\n            dict[key] = dict[key].exportData()\r\n        })\r\n        return rawDict\r\n    }\r\n    static importDict(rawDictData, exportableItemClass){\r\n        var dict = Object.assign({}, rawDictData)\r\n        Object.keys(dict).forEach(key => {\r\n            dict[key] = new exportableItemClass().importData(dict[key])\r\n        })\r\n        return dict\r\n    }\r\n    \r\n\r\n    assignDict(dict){\r\n        Object.assign(this, dict)\r\n        return this\r\n    }\r\n    convertToDict(){\r\n        return JSON.parse(JSON.stringify(this))\r\n    }\r\n\r\n    exportData(){\r\n        return this.smartExport(this.arrayItemsClasses, this.dictItemsClasses, this.propertyExceptions)\r\n    }\r\n    /**\r\n     * Should return this object.\r\n     * @param {Dict} dict \r\n     */\r\n    importData(dict){\r\n        return this.smartImport(dict, this.arrayItemsClasses, this.dictItemsClasses, this.propertyExceptions)\r\n    }\r\n\r\n\r\n    /**\r\n     * \r\n     * @param {Dict} data \r\n     * @param {Dict<Exportable>} arrayItemsClasses\r\n     * @param {Dict<Exportable>} dictItemsClasses\r\n     * @returns this\r\n     */\r\n    smartImport(data, arrayItemsClasses=null, dictItemsClasses=null, propertyExceptions=null){\r\n        data = Object.assign({}, data)\r\n        if(propertyExceptions!=null){\r\n            propertyExceptions.forEach(propertyKey=>{\r\n                if(propertyKey!=null) delete data[propertyKey]\r\n            })\r\n        }\r\n        \r\n        this.assignDict(data)\r\n\r\n        if(arrayItemsClasses!=null)\r\n        Object.keys(arrayItemsClasses).forEach(arrayKey=>{\r\n            if(arrayKey in data)\r\n                this[arrayKey] = Exportable.importArray(data[arrayKey], arrayItemsClasses[arrayKey])\r\n        })\r\n\r\n        if(dictItemsClasses!=null)\r\n        Object.keys(dictItemsClasses).forEach(dictKey=>{\r\n            if(dictKey in data)\r\n                this[dictKey] = Exportable.importDict(data[dictKey], dictItemsClasses[dictKey])\r\n        })\r\n        return this\r\n    }\r\n    /**\r\n     *  \r\n     * @param {Dict<Exportable>} arrayItemsClasses\r\n     * @param {Dict<Exportable>} dictItemsClasses\r\n     * @returns this\r\n     */\r\n    smartExport(arrayItemsClasses=null, dictItemsClasses=null, propertyExceptions=null){\r\n        var rawData = this.convertToDict()\r\n\r\n        if(arrayItemsClasses!=null)\r\n        Object.keys(arrayItemsClasses).forEach(arrayKey=>{\r\n            if(arrayKey in this)\r\n                rawData[arrayKey] = Exportable.exportArray(this[arrayKey])\r\n        })\r\n        \r\n        if(dictItemsClasses!=null)\r\n        Object.keys(dictItemsClasses).forEach(dictKey=>{\r\n            if(dictKey in this)\r\n                rawData[dictKey] = Exportable.exportDict(this[dictKey])\r\n        })\r\n\r\n        if(propertyExceptions!=null){\r\n            propertyExceptions.forEach(propertyKey=>{\r\n                if(propertyKey!=null){\r\n                    delete rawData[propertyKey]\r\n                }\r\n            })\r\n        }\r\n\r\n        return rawData\r\n    }\r\n}","import {Exportable} from './Exportable'\r\n\r\nexport class Person extends Exportable{\r\n    /**\r\n     * @param {String} name person's name\r\n     * @param {Dict<String>} links dict of sites ids as keys and urls as values \r\n     * @param {Number} uid dict of sites ids as keys and urls as values \r\n     */\r\n    constructor(name=\"\", links={}, avatar=\"\", uid=0){\r\n        super()\r\n        this.name = name\r\n        this.avatar = avatar\r\n        this.uid = uid\r\n        /**dict of sites ids as keys and urls as values \r\n         * @type {Dict<String>} */\r\n        this.links = links\r\n    }\r\n}\r\n\r\nexport class DayData extends Exportable{\r\n    constructor(){\r\n        super()\r\n        this.registerClasses(null, null)\r\n        /**@type {Array<Number>}*/\r\n        this.checkedPeopleUids = []\r\n    }\r\n}\r\n\r\nexport class CalendarData extends Exportable{\r\n    constructor(){\r\n        super()\r\n        this.registerClasses(null, {daysRegistry: DayData})\r\n\r\n        /**@type {Dict<DayData>}*/\r\n        this.daysRegistry = {}\r\n    }\r\n}\r\n\r\nexport class GroupData extends Exportable{\r\n    constructor(){\r\n        super()\r\n        this.registerClasses({people: Person}, null, [\"nextPersonUID\"])\r\n        \r\n        /**@type {Array<Person>} */\r\n        this.people = []\r\n        this.nextPersonUID = 0\r\n    }\r\n\r\n    addPerson(person){\r\n        this.updateNextPersonUID()\r\n        person.uid = this.nextPersonUID\r\n        this.nextPersonUID+=1\r\n        this.people.push(person)\r\n    }\r\n    removePerson(person){\r\n        this.people.splice(\r\n            this.people.indexOf(person), 1)\r\n        this.updateNextPersonUID()\r\n    }\r\n    updateNextPersonUID(){\r\n        this.nextPersonUID = 0\r\n        this.people.forEach(person=>{\r\n            if(person.uid>this.nextPersonUID){\r\n                this.nextPersonUID = person.uid\r\n            }\r\n        })\r\n        this.nextPersonUID+=1\r\n    }\r\n    importData(dict){\r\n        super.importData(dict)\r\n        this.people.sort(function(a, b){\r\n            var nameA=a.name.toLowerCase(), nameB=b.name.toLowerCase()\r\n            if (nameA < nameB)\r\n                return -1\r\n            if (nameA > nameB)\r\n                return 1\r\n            return 0\r\n        })\r\n        this.updateNextPersonUID()\r\n        return this\r\n    }\r\n}\r\n\r\nexport class GroupLibrary extends Exportable{\r\n    constructor(){\r\n        super()\r\n        this.registerClasses(null, {groups: GroupData})\r\n        \r\n        /**@type {Dict<GroupData>} */\r\n        this.groups = {}\r\n    }\r\n}\r\n","import { config } from \"./Config\"\r\nimport { DayData, GroupData as GroupData, Person } from \"./GroupLibrary\"\r\n\r\nfunction createDefaultGroup(){ \r\n    var group = new GroupData()\r\n    if(config.createTestData){\r\n        group.addPerson(new Person(\"Морозов Егор\", {\"vk\": \"https://vk.com/namelessvoice\"}, \"https://sun9-83.userapi.com/impg/Q4OJDXd6Mi_31d1jbc7mzISzaOtcCVOucMih2A/8JnV7gQjF9o.jpg?size=894x894&quality=96&sign=ce14e6c952ac472e41438a0794049745&type=album\"))\r\n        group.addPerson(new Person(\"another\", {}))\r\n        group.addPerson(new Person(\"second\", {\"vk\": \"https://vk.com/ubercentrist\"}, \"https://sun9-81.userapi.com/impg/mIIQPvjJk5zWaAtxsTBqfjBLwcH-dNbzZvZYNg/6vzRcijCHKI.jpg?size=320x244&quality=96&sign=b115da6b77d29553c40012f788142b2d&type=album\"))\r\n        group.addPerson(new Person(\"second\", {\"vk\": \"https://vk.com/ubercentrist\"}, \"https://sun9-81.userapi.com/impg/mIIQPvjJk5zWaAtxsTBqfjBLwcH-dNbzZvZYNg/6vzRcijCHKI.jpg?size=320x244&quality=96&sign=b115da6b77d29553c40012f788142b2d&type=album\"))\r\n        group.addPerson(new Person(\"second\", {\"vk\": \"https://vk.com/ubercentrist\"}, \"https://sun9-81.userapi.com/impg/mIIQPvjJk5zWaAtxsTBqfjBLwcH-dNbzZvZYNg/6vzRcijCHKI.jpg?size=320x244&quality=96&sign=b115da6b77d29553c40012f788142b2d&type=album\"))\r\n    }\r\n    return group\r\n}\r\nfunction createDefaultDay(){\r\n    var day = new DayData()\r\n    if(config.createTestData){\r\n        \r\n    }\r\n    return day\r\n}\r\n\r\nexport class RemoteApi{\r\n    constructor(){\r\n        this.username=\"\"\r\n        this.password=\"\"\r\n        this.userCaptainGroup=\"\"\r\n    }\r\n\r\n    logIn(username, password, callback){\r\n        try{\r\n            var apiRequestUrl = `login.php?username=${username}&password=${password}`\r\n            fetch(config.rootApiUrl+apiRequestUrl)\r\n            .then(req=>req.json()).then(data=>{\r\n                if(!(data instanceof Array) && (\"error\" in data)) throw data\r\n                this.username = username\r\n                this.password = password\r\n                this.userCaptainGroup = data[5]\r\n                callback(true)\r\n            }).catch((reason)=>{\r\n                console.log(\"cant log in\")\r\n                console.error(reason)\r\n                callback(false)\r\n            })\r\n        }catch(e){\r\n            console.error(e)\r\n            callback(false)\r\n        }\r\n    }\r\n\r\n    makeWriteRequest(apiRequestUrl, exportableData, postData, callback){\r\n        var rawData = exportableData.exportData()\r\n        var mainPostData = {\r\n            data: JSON.stringify(rawData),\r\n            username: this.username,\r\n            password: this.password,\r\n        }\r\n        Object.assign(mainPostData, postData)\r\n        var formData = new FormData()\r\n        Object.keys(mainPostData).forEach(key=>{\r\n            formData.append(key, mainPostData[key])\r\n        })\r\n\r\n        try{\r\n            fetch(config.localApiUrl+apiRequestUrl, {\r\n                method: 'POST',\r\n                body: formData\r\n            }).then(req=>req.json()).then(data=>{\r\n                if(\"error\" in data) throw data\r\n                callback(true)\r\n            }).catch((reason)=>{\r\n                console.error(reason)\r\n                callback(false)\r\n            })\r\n        }catch(e){\r\n            console.error(e)\r\n            callback(false)\r\n        }\r\n    }\r\n    makeGetDataRequest(apiRequestUrl, exportableClass, defaultValue, callback){\r\n        try{\r\n            fetch(config.localApiUrl+apiRequestUrl).then(req=>req.json()).then(data=>{\r\n                var exportable = new exportableClass()\r\n                exportable.importData(data)\r\n                callback(exportable)\r\n            }).catch((reason)=>{\r\n                console.error(reason)\r\n                callback(defaultValue)\r\n            })\r\n        }\r\n        catch(e){\r\n            console.error(e)\r\n            callback(defaultValue)\r\n        }\r\n    }\r\n    \r\n    getGroup(groupName, callback){\r\n        this.makeGetDataRequest(\r\n            `get_group.php?group_name=${groupName}`, \r\n            GroupData, createDefaultGroup(), group=>{\r\n                callback(group)\r\n        })\r\n    }\r\n    writeGroup(groupName, groupData, callback){\r\n        this.makeWriteRequest(\r\n            \"write_group.php\", groupData, {group_name: groupName}, success=>{\r\n            callback(success)\r\n        })\r\n    }\r\n\r\n    getDayData(groupName, dayTimestamp, callback){\r\n        this.makeGetDataRequest(\r\n            `get_day.php?group_name=${groupName}&day_timestamp=${dayTimestamp}`, \r\n            DayData, createDefaultDay(), day=>{\r\n                callback(day)\r\n        })\r\n    }\r\n    writeDayData(groupName, dayTimestamp, dayData, callback){\r\n        this.makeWriteRequest(\r\n            \"write_day.php\", dayData,\r\n            {group_name: groupName, day_timestamp: dayTimestamp}, \r\n            success=>{\r\n                callback(success)\r\n            }\r\n        )\r\n    }\r\n}","import { RemoteApi } from \"./RemoteApi\"\r\nimport Cookies from \"js-cookie\"\r\nimport { config } from \"./Config\"\r\n\r\nexport class Client{\r\n    constructor(){\r\n        this.api = new RemoteApi()\r\n        this.loggedIn = false\r\n    }\r\n    \r\n    /**\r\n     * Checking cookies and tries to log in with saved fields\r\n     * @param {Function} callback\r\n     * @returns true if needed cookies found, else false\r\n     */\r\n    tryLoginWithCookies(callback){\r\n        var username = Cookies.get(config.usernameCookieName)\r\n        var password = Cookies.get(config.passwordCookieName)\r\n        if(!username || !password) return false;\r\n\r\n        this.api.logIn(username, password, callback)\r\n        return true\r\n    }\r\n    saveCookies(username, password){\r\n        Cookies.set(config.usernameCookieName, username)\r\n        Cookies.set(config.passwordCookieName, password)\r\n    }\r\n    logInWithFields(username, password, callback){\r\n        this.api.logIn(username, password, (success)=>{\r\n            if(success){\r\n                this.saveCookies(username, password)\r\n            }\r\n            callback(success)\r\n        })\r\n    }\r\n}","import { EventHandler } from \"event-js\"\r\nimport { DayData } from \"./GroupLibrary\"\r\nimport { RemoteApi } from \"./RemoteApi\"\r\n\r\nexport class DayEditorState{\r\n    static createTodayTimestamp(){\r\n        let date = new Date()\r\n        return new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime()\r\n    }\r\n    constructor(api){\r\n        /**@type {RemoteApi} */\r\n        this.api = api \r\n        this.currentDayTimestamp = DayEditorState.createTodayTimestamp()\r\n        this.currentDayDate = new Date(this.currentDayTimestamp)\r\n        this.dayData = new DayData()\r\n\r\n        this.onDayDataChanged = new EventHandler(this)\r\n    }\r\n\r\n    setCurrentDayTimestamp(groupName, dayTimestamp, callback){\r\n        this.currentDayTimestamp = dayTimestamp\r\n        this.currentDayDate = new Date(this.currentDayTimestamp)\r\n        this.api.getDayData(groupName, this.getCurrentDayTimestamp(), ((dayData)=>{\r\n            this.dayData = dayData\r\n            if(callback!=null) callback()\r\n            this.onDayDataChanged.publish()\r\n        }).bind(this))\r\n    }\r\n    getCurrentDayTimestamp(){\r\n        return this.currentDayTimestamp\r\n    }\r\n\r\n    save(groupName, callback=null){\r\n        this.api.writeDayData(groupName, this.currentDayTimestamp, this.dayData, (success)=>{\r\n            if(!success) console.error(\"cant write current day data\")\r\n            if(callback) callback(success)\r\n        })\r\n    }\r\n}","import { GroupData } from \"./GroupLibrary\"\r\nimport { RemoteApi } from \"./RemoteApi\"\r\nimport { EventHandler } from \"event-js\"\r\n\r\nexport class GroupEditorState{\r\n    constructor(api){\r\n        /**@type {RemoteApi} */\r\n        this.api = api\r\n        this.currentGroupName = \"\"\r\n        this.groupData = new GroupData()\r\n\r\n        this.onGroupDataChanged = new EventHandler(this)\r\n    }\r\n\r\n    setCurrentGroup(groupName, callback){\r\n        this.currentGroupName = groupName\r\n        this.api.getGroup(this.currentGroupName, ((data)=>{\r\n            this.groupData = data\r\n            if(callback!=null) callback()\r\n            this.onGroupDataChanged.publish()\r\n        }).bind(this))\r\n    }\r\n\r\n    save(callback=null){\r\n        this.api.writeGroup(this.currentGroupName, this.groupData, (success)=>{\r\n            if(!success) console.error(\"cant write group data\")\r\n            if(callback) callback(success)\r\n        })\r\n    }\r\n}","import * as CSV from \"csv-string\"\r\nimport { config } from \"./Config\"\r\n\r\nvar translationCSV = `message, \"ru\", \"en\"\r\ncontinue_without_authorization, \"Продолжить без авторизации\", \"\"\r\n\r\nchange_theme, \"Сменить палитру\", \"\"\r\nsettings, \"Настройки\", \"\"\r\nhome.title, \"Group Captain's Tool\", \"Group Captain's Tool\"\r\nhome.head_label, \"Инструмент для главарей университетских банд.\", \"\"\r\nhome.section.0.title, \"Дневные записи\", \"\"\r\nhome.section.0.label, \"Запись информации относящейся к определенному дню, например посещаемость.\", \"\"\r\ncheck_people_button, \"Отметить посещаемость\", \"\"\r\n\r\napp.title, \"Group Captain's Tool\", \"Group Captain's Tool\"\r\n\r\nlogin_error, \"Не получилось войти, либо введенные данные не корректны, либо вас нет в базе.\", \"\"\r\n\r\nhome.section.1.title, \"Редактирование\", \"\"\r\nhome.section.1.label, \"\", \"\"\r\n\r\nclose, \"Закрыть\",\"\"\r\npeople_checker.title, \"Посещаемость\", \"\"\r\npeople_checker.head_label, \"Можно отметить людей присутствовавших в вузе\", \"\"\r\n\r\nshow, \"показать\", \"\"\r\nlist_of_present, \"Список присутствующих\", \"\"\r\nlist_of_absent, \"Список отсутствующих\", \"\"\r\n\r\nedit_group_button, \"Редактировать группу\", \"\"\r\ngroup_editor.title, \"Редактирование группы\", \"\"\r\ngroup_editor.head_label, \"\", \"\"\r\nlist_of_names, \"Список имен\", \"\"\r\ngroup_data_json, \"Json объект группы\", \"\"\r\nedit_person, \"edit\", \"edit\"\r\nediting, \"Редактирование\", \"\"\r\ndelete, \"удалить\", \"\"\r\nsave, \"сохранить\", \"\"\r\nadd_person, \"Добавить\", \"\"\r\nsave_error, \"Не получается сохранить данные группы, похоже у вас не достаточно для этого прав.\", \"\"\r\n\r\nmonth.0.genitive,\"января\",\"\"\r\nmonth.1.genitive,\"февраля\",\"\"\r\nmonth.2.genitive,\"марта\",\"\"\r\nmonth.3.genitive,\"апреля\",\"\"\r\nmonth.4.genitive,\"мая\",\"\"\r\nmonth.5.genitive,\"июня\",\"\"\r\nmonth.6.genitive,\"июля\",\"\"\r\nmonth.7.genitive,\"августа\",\"\"\r\nmonth.8.genitive,\"сентября\",\"\"\r\nmonth.9.genitive,\"октября\",\"\"\r\nmonth.10.genitive,\"ноября\",\"\"\r\nmonth.11.genitive,\"декабря\",\"\"\r\n`\r\n\r\n\r\nclass Localization{\r\n    constructor(){\r\n        this.translationTable = {}\r\n        this.currentLocale = config.locale\r\n    }\r\n\r\n    parseTranslationTable(csvText){\r\n        var translationMatrix = CSV.parse(csvText)\r\n        var translationTable = {}\r\n        var locales = translationMatrix[0].slice(1)\r\n        for (let i = 1; i < translationMatrix.length; i++) {\r\n            if(translationMatrix[i].length<1+locales.length) continue\r\n\r\n            let message = translationMatrix[i][0]\r\n            translationTable[message] = {}\r\n\r\n            locales.forEach((locale, localeIndex)=>{\r\n                translationTable[message][locale] = translationMatrix[i][1+localeIndex]\r\n            })\r\n        }\r\n        console.log(translationTable)\r\n        return translationTable\r\n    }\r\n    loadTranslationFromCSV(csvText){\r\n        this.translationTable = this.parseTranslationTable(csvText)\r\n    }\r\n    translate(message){\r\n        if(message in this.translationTable){\r\n            return this.translationTable[message][this.currentLocale]\r\n        }\r\n        return message\r\n    }\r\n    setLocale(locale){\r\n        this.currentLocale = locale\r\n    }\r\n}\r\n\r\nvar localization = new Localization()\r\nlocalization.loadTranslationFromCSV(translationCSV)\r\nwindow.localization = localization\r\nexport function translate(message){\r\n    return localization.translate(message)\r\n}","import { config } from \"./Config\";\r\nimport { DayEditorState } from \"./DayEditorState\";\r\nimport { Exportable } from \"./Exportable\";\r\n\r\n//took it from here: https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values-in-javascript\r\nexport function getParameterByName(name, url = window.location.href) {\r\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\r\n    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\r\n        results = regex.exec(url);\r\n    if (!results) return null;\r\n    if (!results[2]) return '';\r\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\r\n}\r\nexport function updateQueryStringParameter(uri, key, value) {\r\n    var re = new RegExp(\"([?&])\" + key + \"=.*?(&|$)\", \"i\");\r\n    var separator = uri.indexOf('?') !== -1 ? \"&\" : \"?\";\r\n    if (uri.match(re)) {\r\n        return uri.replace(re, '$1' + key + \"=\" + value + '$2');\r\n    }\r\n    else {\r\n        return uri + separator + key + \"=\" + value;\r\n    }\r\n}\r\n\r\nexport class SearchParams extends Exportable{\r\n    constructor(){\r\n        super()\r\n        // snakecase because it's url component\r\n        this.group_name = config.defaultGroupName\r\n        this.current_day_timestamp = DayEditorState.createTodayTimestamp().toString()\r\n\r\n        window.addEventListener('popstate', (function(event) {\r\n            console.log(\"cha ge history\")\r\n            this.replaceParams()\r\n        }).bind(this), false);\r\n    }\r\n\r\n    updateParams(){\r\n        var params = this.exportData()\r\n        \r\n        Object.keys(params).forEach(key=>{\r\n            var value = getParameterByName(key)\r\n            if(value!=null){\r\n                this[key] = value\r\n            }\r\n        })\r\n        this.replaceParams()\r\n    }\r\n    replaceParams(){\r\n        var params = this.exportData()\r\n        var searchParams = new URLSearchParams(window.location.search);\r\n        \r\n        Object.keys(params).forEach(key=>{\r\n            searchParams.set(key, this[key]);\r\n        })\r\n\r\n        var url = window.location.href\r\n        if(url.indexOf(\"?\")!=-1) url = url.substring(0, url.indexOf(\"?\"))\r\n        url += \"?\" + searchParams.toString();\r\n        window.history.replaceState(null, null, url);\r\n    }\r\n}\r\nvar searchParams = new SearchParams()\r\nwindow.searchParams = searchParams\r\nexport {searchParams}","import React from \"react\"\r\nimport App from '../App'\r\nimport { ScreenScaffold } from './Screens'\r\nimport Calendar from 'react-calendar'\r\nimport './CustomCalendarStyles.css';\r\nimport { config } from \"../client/Config\";\r\nimport { searchParams } from \"../client/SearchParams\";\r\n\r\n\r\nexport class CalendarComponent extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        /**@type {{app: App}} */\r\n        this.props = this.props\r\n\r\n        this.state = {\r\n            selectedDate: new Date(this.props.app.dayEditorState.getCurrentDayTimestamp())\r\n        }\r\n\r\n        this.onDateChange = this.onDateChange.bind(this)\r\n    }\r\n\r\n    onDateChange(date){\r\n        this.props.app.dayEditorState.setCurrentDayTimestamp(\r\n            this.props.app.groupEditorState.currentGroupName,\r\n            date.getTime(), \r\n            ()=>{\r\n                searchParams.current_day_timestamp = this.props.app.dayEditorState.currentDayTimestamp\r\n                searchParams.replaceParams()\r\n                console.log(searchParams.current_day_timestamp)\r\n            }\r\n        )\r\n        this.setState({selectedDate: date})\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"calendar-container\">\r\n                <Calendar value={this.state.selectedDate} onChange={this.onDateChange} locale={config.locale}/>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from \"react\"\r\nimport App from \"../App\"\r\nimport { translate } from \"../client/Localization\"\r\nimport { CalendarComponent } from \"./Calendar\"\r\n\r\nexport class ScreenChangeButton extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        /**@type {{app:App, text:String, className:String, screen:Number}} */\r\n        this.props = this.props\r\n        this.onClick = this.onClick.bind(this)\r\n    }\r\n    onClick(){\r\n        this.props.app.goToScreen(this.props.screen)\r\n    }\r\n    render(){\r\n        return (\r\n        <div className={\"button \" + this.props.className} onClick={this.onClick}>\r\n            {this.props.text}\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class ScreenScaffold extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n    }\r\n    render(){\r\n        return (\r\n            <div className=\"screen scaffold\">\r\n                <div className=\"header\">\r\n                    {this.props.headerItems}\r\n                </div>\r\n                <div className=\"body\">\r\n                    {this.props.body}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class BodySection extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        /**@type {{label:String}} */\r\n        this.props = this.props\r\n    }\r\n    render(){\r\n        return (\r\n            <div className=\"body-section\">\r\n                <div className=\"label\">{this.props.label}</div>\r\n                {this.props.children}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class WaitingScreen extends React.Component{\r\n    render(){\r\n        return (\r\n            <div className=\"screen\">\r\n                <div className=\"center\">\r\n                    <div>\r\n                        please wait...\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport class LogInScreen extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        /**@type {{app: App}} */\r\n        this.props = this.props\r\n        this.usernameInputRef = React.createRef()\r\n        this.passwordInputRef = React.createRef()\r\n        this.onLogInClicked = this.onLogInClicked.bind(this)\r\n        this.state = {\r\n            error: null\r\n        }\r\n    }\r\n    onLogInClicked(){\r\n        var username = this.usernameInputRef.current.value\r\n        var password = this.passwordInputRef.current.value\r\n        if(username!=\"\" && password!=\"\"){\r\n            this.props.app.client.logInWithFields(username, password, success=>{\r\n                if(!success){\r\n                    this.setState({\r\n                        error: translate(\"login_error\")\r\n                    })\r\n                }else{\r\n                    this.props.app.goToScreen(App.ScreenEnum.Homepage)\r\n                }\r\n            })\r\n        }\r\n    }\r\n    render(){\r\n        return (\r\n            <ScreenScaffold \r\n            headerItems={\r\n                [\r\n                    <div className=\"column\">\r\n                        <div className=\"title\">{translate(\"home.title\")}</div>\r\n                        <div className=\"space\"></div>\r\n                        <div className=\"label\">{translate(\"home.head_label\")}</div>\r\n                    </div>\r\n                ]\r\n            }\r\n            body={\r\n                <div>\r\n                    <div className=\"body-section\">\r\n                        {/* TODO: localize */}\r\n                        <div className=\"title\">Вход в систему</div>\r\n                        <div className=\"space\"></div>\r\n                        <div className=\"label\">Лишь у некоторых пользователей есть доступ к редактированию всяких ништяков.</div>\r\n                        <div className=\"space\"></div>\r\n\r\n                        {this.state.error ? <div className=\"label error\">{this.state.error}</div> : \"\"}\r\n\r\n                        <div className=\"label\">username:</div>\r\n                        <input ref={this.usernameInputRef} className=\"input\" type=\"text\" name=\"ashen-hermit-site-username\" placeholder=\"username\" required/>\r\n                        <div className=\"space\"></div>\r\n                        <div className=\"label\">password:</div>\r\n                        <input ref={this.passwordInputRef} className=\"input\" type=\"password\" name=\"ashen-hermit-site-username\" placeholder=\"password\" required/>\r\n                        <div className=\"space\"></div>\r\n                        <div className=\"button\" onClick={this.onLogInClicked}>Войти</div>\r\n                    </div>\r\n                    <div className=\"body-section\">\r\n                        <ScreenChangeButton text={translate(\"continue_without_authorization\")} app={this.props.app} screen={App.ScreenEnum.Homepage} className=\"\"/>\r\n                    </div>\r\n                </div>\r\n            }/>\r\n        )\r\n    }\r\n}\r\n\r\nexport class HomepageScreen extends React.Component{\r\n    render(){\r\n        return (\r\n            <ScreenScaffold \r\n            headerItems={\r\n                [\r\n                    <div className=\"column\">\r\n                        <div className=\"title\">{translate(\"home.title\")}</div>\r\n                        <div className=\"space\"></div>\r\n                        <div className=\"label\">{translate(\"home.head_label\")}</div>\r\n                    </div>\r\n                ]\r\n            }\r\n            body={\r\n                <div>\r\n                    <div className=\"body-section\">\r\n                        <div className=\"title\">{translate(\"home.section.0.title\")}</div>\r\n                        <div className=\"space\"></div>\r\n                        <div className=\"label\">{translate(\"home.section.0.label\")}</div>\r\n                        <div className=\"space\"></div>\r\n\r\n                        <CalendarComponent app={this.props.app}/>\r\n\r\n                        <ScreenChangeButton text={translate(\"check_people_button\")} app={this.props.app} screen={App.ScreenEnum.PeopleChecker} className=\"\"/>\r\n                    </div>\r\n\r\n                    <div className=\"body-section\">\r\n                        <div className=\"title\">{translate(\"home.section.1.title\")}</div>\r\n                        <div className=\"space\"></div>\r\n                        <div className=\"label\">{translate(\"home.section.1.label\")}</div>\r\n                        <div className=\"space\"></div>\r\n                        <ScreenChangeButton \r\n                            text={translate(\"edit_group_button\") + \" (\"+this.props.app.groupEditorState.currentGroupName+\")\"} \r\n                            app={this.props.app} \r\n                            screen={App.ScreenEnum.PeopleEditor} \r\n                            className=\"\"/>\r\n                    </div>\r\n\r\n                    <div className=\"body-section\">\r\n                        <div className=\"title\">{translate(\"settings\")}</div>\r\n                        <div className=\"space\"></div>\r\n                        <div onClick={(()=>{this.props.app.toggleTheme()}).bind(this)} className=\"button\">{translate(\"change_theme\")}</div>\r\n                    </div>\r\n                </div>\r\n            }/>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nexport class FloatingScreen extends React.Component{\r\n    constructor(props){\r\n      super(props)\r\n      this.state = {\r\n        isHidden: true,\r\n      }\r\n      this.hide = this.hide.bind(this)\r\n    }\r\n    show(){\r\n      this.setState({\r\n        isHidden: false,\r\n      })\r\n    }\r\n    hide(){\r\n      this.setState({\r\n        isHidden: true,\r\n      })\r\n    }\r\n    render(){\r\n      let hiddenClass = this.state.isHidden ? \"hidden\" : \"\"\r\n  \r\n      return (\r\n        <div className={\"floating-screen \" + this.props.className + \" \" + hiddenClass}>\r\n          <div className=\"button\" onClick={this.hide}>{translate(\"close\")}</div>\r\n          {this.props.children}\r\n        </div>\r\n      )\r\n    }\r\n  }","import React from \"react\"\r\n\r\nexport class PersonItem extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        /**@type {{}} */\r\n        this.props = this.props\r\n    }\r\n    render(){\r\n        return (\r\n            <div className=\"person-item\">\r\n                <div className=\"person-item\">\r\n                    \r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","export function addFixedChars(text, char, numberOfChars, before=true){\r\n    var addNum = Math.max(0, numberOfChars-text.length)\r\n    for (let i = 0; i < addNum; i++) {\r\n        if(before) text = char + text\r\n        else text += char\r\n    }\r\n    return text\r\n}","import {PersonItem} from './PersonItem'\r\nimport React from \"react\"\r\nimport App from '../App'\r\nimport { ScreenScaffold } from './Screens'\r\nimport { DayData, Person } from '../client/GroupLibrary'\r\nimport { addFixedChars } from '../client/Utils'\r\nimport { translate } from '../client/Localization'\r\n\r\nexport class PersonCheckState{\r\n    /**\r\n     * \r\n     * @param {Person} person \r\n     * @param {Boolean} checked \r\n     */\r\n    constructor(person, checked=false){\r\n        this.person = person\r\n        this.checked = checked\r\n    }\r\n}\r\n\r\nexport class PeopleCheckerScreen extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        /**@type {{app: App}} */\r\n        this.props = this.props\r\n        /**@type {DayData} */\r\n        this.dayData = this.props.app.dayEditorState.dayData\r\n        /**@type {Array<PersonCheckState>} */\r\n        this.peopleCheckList = null\r\n        this.builCheckList()\r\n        this.onCheckListChanged = this.onCheckListChanged.bind(this)\r\n        this.onGroupDataChanged = this.onGroupDataChanged.bind(this)\r\n\r\n        this.showCheckedPeople = this.showCheckedPeople.bind(this)\r\n        this.showUncheckedPeople = this.showUncheckedPeople.bind(this)\r\n\r\n        this.state = {\r\n            error: null\r\n        }\r\n    }\r\n    builCheckList(){\r\n        this.peopleCheckList = this.createPeopleCheckList()\r\n    }\r\n    createPeopleCheckList(){\r\n        var checkList = []\r\n        this.props.app.groupEditorState.groupData.people.forEach(person=>{\r\n            checkList.push(new PersonCheckState(person, this.dayData.checkedPeopleUids.indexOf(person.uid)!=-1))\r\n        })\r\n        return checkList\r\n    }\r\n    updateDayData(){\r\n        var peopleUids = []\r\n        this.peopleCheckList.forEach(personCheckState=>{\r\n            if(personCheckState.checked) peopleUids.push(personCheckState.person.uid)\r\n        })\r\n        this.dayData.checkedPeopleUids = peopleUids\r\n    }\r\n    componentDidMount(){\r\n        this.props.app.groupEditorState.onGroupDataChanged.subscribe(this.onGroupDataChanged)\r\n        this.props.app.dayEditorState.onDayDataChanged.subscribe(this.onGroupDataChanged)\r\n    }\r\n    componentWillUnmount(){\r\n        this.props.app.groupEditorState.onGroupDataChanged.unsubscribe(this.onGroupDataChanged)\r\n        this.props.app.dayEditorState.onDayDataChanged.unsubscribe(this.onGroupDataChanged)\r\n    }\r\n    onGroupDataChanged(){\r\n        this.dayData = this.props.app.dayEditorState.dayData\r\n        this.builCheckList()\r\n        this.forceUpdate()\r\n    }\r\n    onCheckListChanged(){\r\n        this.updateDayData()\r\n        this.props.app.dayEditorState.save(\r\n            this.props.app.groupEditorState.currentGroupName, \r\n            (success)=>{\r\n                if(!success){\r\n                    this.setState({\r\n                        error: translate(\"save_error\")\r\n                    })\r\n                }\r\n            })\r\n        this.forceUpdate()\r\n    }\r\n    showCheckedPeople(){\r\n        var list = this.peopleCheckList.filter(x=>x.checked)\r\n        list = list.map(x=>x.person.name)\r\n        list = list.join(\"\\n\")\r\n        list = translate(\"list_of_present\")+\":\\n\\n\" + list\r\n        this.props.app.showClipboardWithText(list)\r\n    }\r\n    showUncheckedPeople(){\r\n        var list = this.peopleCheckList.filter(x=>!x.checked)\r\n        list = list.map(x=>x.person.name)\r\n        list = list.join(\"\\n\")\r\n        list = translate(\"list_of_absent\")+\":\\n\\n\" + list\r\n        this.props.app.showClipboardWithText(list)\r\n    }\r\n    render(){\r\n        let date = this.props.app.dayEditorState.currentDayDate\r\n        let dateText = `${addFixedChars(date.getDate().toString(), \"0\", 2)}.${addFixedChars((date.getMonth()+1).toString(), \"0\", 2)}.${date.getFullYear()}`\r\n        let dateVerboseText = date.getDate().toString() + \" \" + translate(\"month.\"+date.getMonth()+\".genitive\")\r\n        let titleDate = dateVerboseText + \" \" + date.getFullYear().toString()\r\n        let groupName = this.props.app.groupEditorState.currentGroupName\r\n\r\n        return (\r\n            <ScreenScaffold \r\n            headerItems={\r\n                [\r\n                    <div className=\"title\">{titleDate} {translate(\"people_checker.title\")} {groupName}</div>,\r\n                ]\r\n            }\r\n            body={\r\n                <div className=\"people-items-container\">\r\n                    <div className=\"body-section\">\r\n                        <div className=\"label\">{dateText}<br/>{translate(\"people_checker.head_label\")} {dateVerboseText}</div>\r\n                    </div>\r\n                    <div className=\"body-section\">\r\n                        {/* TODO: localize */}\r\n                        <div className=\"title\">Аналитика</div>\r\n                        <div className=\"space\"></div>\r\n                        <div className=\"label\">в этот день пришли: {this.dayData.checkedPeopleUids.length} из {this.props.app.groupEditorState.groupData.people.length} человек</div>\r\n                        <div className=\"space\"></div>\r\n                        <div className=\"label\">{translate(\"show\")}:</div>\r\n                        <div onClick={this.showCheckedPeople} className=\"button small\">{translate(\"list_of_present\")}</div>\r\n                        <div onClick={this.showUncheckedPeople} className=\"button small error\">{translate(\"list_of_absent\")}</div>\r\n                    </div>\r\n\r\n                    {this.state.error ? <div className=\"error\">{this.state.error}</div> : \"\"}\r\n\r\n                    {\r\n                        this.peopleCheckList.map(personCheckState=>{\r\n                            return <PersonCheckItem personCheckState={personCheckState} onChange={this.onCheckListChanged}/>\r\n                        })\r\n                    }\r\n                </div>\r\n            }/>\r\n        )\r\n    }\r\n}\r\n\r\nexport class PersonCheckItem extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        /**@type {{personCheckState: PersonCheckState, onChange: Function}} */\r\n        this.props = this.props\r\n        this.toggleCheck = this.toggleCheck.bind(this)\r\n    }\r\n    renderLinks(links){\r\n        return Object.keys(links).map(siteId=>{\r\n            return links[siteId]==\"\" ? \"\" : <a className=\"link\" target=\"_blank\" href={links[siteId]}>{siteId}</a>\r\n        })\r\n    }\r\n    toggleCheck(){\r\n        this.props.personCheckState.checked = !this.props.personCheckState.checked\r\n        this.forceUpdate()\r\n        this.props.onChange()\r\n    }\r\n    render(){\r\n        let avatar = this.props.personCheckState.person.avatar\r\n        let name = this.props.personCheckState.person.name\r\n        let links = this.props.personCheckState.person.links\r\n\r\n        let itemActiveClassName = this.props.personCheckState.checked ? \"\" : \"inactive\"\r\n        let checkButtonActiveClassName = this.props.personCheckState.checked ? \"\" : \"inactive\"\r\n\r\n        return (\r\n            <div className={\"person-item \"+itemActiveClassName}>\r\n                <div className=\"avatar\">\r\n                    {avatar!=\"\" ? <img src={avatar}></img> : \"\"}\r\n                </div>\r\n                <div className=\"info\">\r\n                    <div className=\"name\">{name}</div>\r\n                    <div className=\"links\">{this.renderLinks(links)}</div>\r\n                </div>\r\n                <div>\r\n                    <div onClick={this.toggleCheck} className={\"button check-button \" + checkButtonActiveClassName}></div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from \"react\"\r\nimport App from '../App'\r\nimport { FloatingScreen, ScreenScaffold } from './Screens'\r\nimport { translate } from '../client/Localization'\r\nimport { Person } from '../client/GroupLibrary'\r\nimport { GroupEditorState } from \"../client/GroupEditorState\"\r\nimport { config } from \"../client/Config\"\r\n\r\nexport class GroupEditorScreen extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        /**@type {{app: App}} */\r\n        this.props = this.props\r\n        this.state = {\r\n            error: null\r\n        }\r\n\r\n        this.onGroupDataChanged = this.onGroupDataChanged.bind(this)\r\n        this.onPersonChanged = this.onPersonChanged.bind(this)\r\n\r\n        this.showPeopleNamesList = this.showPeopleNamesList.bind(this)\r\n        this.showPeopleDataJson = this.showPeopleDataJson.bind(this)\r\n\r\n        this.startEditingPerson = this.startEditingPerson.bind(this)\r\n        this.addPerson = this.addPerson.bind(this)\r\n\r\n        this.personEditorRef = React.createRef()\r\n        this.floatingScreenRef = React.createRef()\r\n    }\r\n    componentDidMount(){\r\n        this.props.app.groupEditorState.onGroupDataChanged.subscribe(this.onGroupDataChanged)\r\n    }\r\n    componentWillUnmount(){\r\n        this.props.app.groupEditorState.onGroupDataChanged.unsubscribe(this.onGroupDataChanged)\r\n    }\r\n    onGroupDataChanged(){\r\n        this.forceUpdate()\r\n    }\r\n    onPersonChanged(){\r\n        this.props.app.groupEditorState.save((success)=>{\r\n            if(!success){\r\n                this.setState({\r\n                    error: translate(\"save_error\")\r\n                })\r\n            }\r\n        })\r\n        this.forceUpdate()\r\n    }\r\n\r\n    addPerson(){\r\n        var newPerson = new Person(\"Person\")\r\n        this.props.app.groupEditorState.groupData.addPerson(newPerson)\r\n        this.startEditingPerson(newPerson)\r\n        this.forceUpdate()\r\n    }\r\n\r\n    showPeopleNamesList(){\r\n        var list = this.props.app.groupEditorState.groupData.people.map(x=>x.name)\r\n        list = list.join(\"\\n\")\r\n        list = this.props.app.groupEditorState.currentGroupName+\"\\n\"+translate(\"list_of_names\")+\":\\n\\n\" + list\r\n        this.props.app.showClipboardWithText(list)\r\n    }\r\n    showPeopleDataJson(){\r\n        var data = this.props.app.groupEditorState.groupData.exportData()\r\n        this.props.app.showClipboardWithText(JSON.stringify(data, null, 2))\r\n    }\r\n\r\n    startEditingPerson(person){\r\n        this.floatingScreenRef.current.show()\r\n        this.personEditorRef.current.startEditing(person)\r\n    }\r\n\r\n    render(){\r\n        let groupName = this.props.app.groupEditorState.currentGroupName\r\n\r\n        return (\r\n            <ScreenScaffold \r\n            headerItems={\r\n                [\r\n                    <div className=\"title\">{translate(\"group_editor.title\")} {groupName}</div>,\r\n                    <div className=\"label\">{translate(\"group_editor.head_label\")}</div>\r\n                ]\r\n            }\r\n            body={\r\n                <div>\r\n                    <div className=\"people-items-container\">\r\n                        <div className=\"body-section\">\r\n                            {/* TODO: localize */}\r\n                            <div className=\"title\">Аналитика</div>\r\n                            <div className=\"space\"></div>\r\n                            <div className=\"label\">всего людей: {this.props.app.groupEditorState.groupData.people.length}</div>\r\n                            <div className=\"space\"></div>\r\n                            <div className=\"label\">{translate(\"show\")}:</div>\r\n                            <div onClick={this.showPeopleNamesList} className=\"button small\">{translate(\"list_of_names\")}</div>\r\n                            <div onClick={this.showPeopleDataJson} className=\"button small\">{translate(\"group_data_json\")}</div>\r\n                        </div>\r\n\r\n                        {this.state.error ? <div className=\"error\">{this.state.error}</div> : \"\"}\r\n\r\n                        {\r\n                            this.props.app.groupEditorState.groupData.people.map(person=>{\r\n                                return <PersonItem person={person} onChange={this.onPersonChanged} startEditing={this.startEditingPerson}/>\r\n                            })\r\n                        }\r\n                        <div onClick={this.addPerson} className=\"add button\">\r\n                            {translate(\"add_person\")}\r\n                        </div>\r\n                    </div>\r\n                    <FloatingScreen className=\"\" ref={this.floatingScreenRef}>\r\n                        <PersonEditorScreen \r\n                            groupEditorState={this.props.app.groupEditorState} \r\n                            onChange={this.onPersonChanged} \r\n                            ref={this.personEditorRef} \r\n                            floatingScreen={this.floatingScreenRef}/>\r\n                    </FloatingScreen>\r\n                </div>\r\n            }/>\r\n        )\r\n    }\r\n}\r\n\r\nclass PropertyInput extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        /**@type {{obj: Object, propKey: String, onChange: Function}} */\r\n        this.props = this.props\r\n        this.onChange = this.onChange.bind(this)\r\n    }\r\n    onChange(event){\r\n        this.props.obj[this.props.propKey] = event.target.value\r\n        this.forceUpdate()\r\n        if(this.props.onChange) this.props.onChange(event.target.value)\r\n    }\r\n    render(){\r\n        return (\r\n            <input type=\"text\" value={this.props.obj[this.props.propKey]} onChange={this.onChange} className=\"input\" name={\"ashen-hermit-\"+this.props.propKey+\"-input\"} autoComplete=\"off\"></input>\r\n        )\r\n    }\r\n}\r\n\r\nexport class PersonEditorScreen extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        /**@type {{groupEditorState: GroupEditorState, floatingScreen: import(\"react\").Ref}} */\r\n        this.props = this.props\r\n        /**@type {{personCopy: Person}} */\r\n        this.state = {\r\n            personCopy: null\r\n        }\r\n        this.realPerson = null\r\n        this.onChangedAvatar = this.onChangedAvatar.bind(this)\r\n        this.onDeletePressed = this.onDeletePressed.bind(this)\r\n        this.onSavePressed = this.onSavePressed.bind(this)\r\n        this.onAvatarError = this.onAvatarError.bind(this)\r\n\r\n        this.avatarRef = React.createRef()\r\n    }\r\n\r\n    onChangedAvatar(){\r\n        this.forceUpdate()\r\n    }\r\n    startEditing(person){\r\n        this.realPerson = person\r\n        this.setState({\r\n            personCopy: new Person().importData(this.realPerson.exportData())\r\n        })\r\n    }\r\n\r\n    onDeletePressed(){\r\n        this.props.groupEditorState.groupData.removePerson(this.realPerson)\r\n        this.props.floatingScreen.current.hide()\r\n        this.props.onChange()\r\n    }\r\n    onSavePressed(){\r\n        this.realPerson.importData(this.state.personCopy.exportData())\r\n        this.props.floatingScreen.current.hide()\r\n        this.props.onChange()\r\n    }\r\n\r\n    onAvatarError(){\r\n        this.avatarRef.current.src = config.blankImage\r\n    }\r\n    \r\n    render(){\r\n        if(this.state.personCopy == null) return \"\"\r\n        \r\n        if(!(\"vk\" in this.state.personCopy.links)) this.state.personCopy.links[\"vk\"] = \"\"\r\n        \r\n        return (\r\n            <div className=\"person-editor\">\r\n                <div className=\"title\">{translate(\"editing\")}</div>\r\n                <br/>\r\n                <div className=\"avatar\">\r\n                    <img src={this.state.personCopy.avatar} onError={this.onAvatarError} ref={this.avatarRef}/>\r\n                </div>\r\n                <div className=\"label\">avatar url</div>\r\n                <PropertyInput obj={this.state.personCopy} propKey={\"avatar\"} onChange={this.onChangedAvatar}/>\r\n                <div className=\"space\"></div><div className=\"space\"></div>\r\n                <div className=\"label\">name</div>\r\n                <PropertyInput obj={this.state.personCopy} propKey={\"name\"}/>\r\n                <div className=\"space\"></div><div className=\"space\"></div>\r\n                <div className=\"label\">vk url</div>\r\n                <PropertyInput obj={this.state.personCopy.links} propKey={\"vk\"}/>\r\n                \r\n                <div className=\"bottom-buttons\">\r\n                    <div onClick={this.onDeletePressed} className=\"button error\">{translate(\"delete\")}</div>\r\n                    <div onClick={this.onSavePressed} className=\"button\">{translate(\"save\")}</div>\r\n                </div>\r\n\r\n                {/* <PropertyInput obj={this.state.person} key={\"name\"}/> */}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport class PersonItem extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        /**@type {{person: Person, onChange: Function, startEditing: Function}} */\r\n        this.props = this.props\r\n\r\n        this.startEditing = this.startEditing.bind(this)\r\n    }\r\n    renderLinks(links){\r\n        return Object.keys(links).map(siteId=>{\r\n            return links[siteId]==\"\" ? \"\" : <a className=\"link\" target=\"_blank\" href={links[siteId]}>{siteId}</a>\r\n        })\r\n    }\r\n    startEditing(){\r\n        this.props.startEditing(this.props.person)\r\n    }\r\n    render(){\r\n        let avatar = this.props.person.avatar\r\n        let name = this.props.person.name\r\n        let links = this.props.person.links\r\n\r\n        return (\r\n            <div className={\"person-item\"}>\r\n                <div className=\"avatar\">\r\n                    {avatar!=\"\" ? <img src={avatar}></img> : \"\"}\r\n                </div>\r\n                <div className=\"info\">\r\n                    <div className=\"name\">{name}</div>\r\n                    <div className=\"links\">{this.renderLinks(links)}</div>\r\n                </div>\r\n                <div>\r\n                    <div onClick={this.startEditing} className={\"button edit-button\"}>{translate(\"edit_person\")}</div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import './App.css';\nimport React from 'react';\nimport {Client} from './client/Client'\nimport {DayEditorState} from './client/DayEditorState'\nimport { GroupEditorState } from './client/GroupEditorState';\nimport {LogInScreen, HomepageScreen, WaitingScreen, FloatingScreen} from './components/Screens'\nimport {PeopleCheckerScreen} from './components/PeopleChecker'\nimport {Calendar} from './components/Calendar'\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  useHistory\n} from \"react-router-dom\";\nimport { searchParams } from './client/SearchParams';\nimport { translate } from './client/Localization';\nimport Cookies from 'js-cookie';\nimport { config } from './client/Config';\nimport { GroupEditorScreen } from './components/GroupEditor';\n\nexport default class App extends React.Component{\n  static ScreenEnum = Object.freeze({\n                      \"Waiting\": 0, \"LogIn\": 1, \"Homepage\": 2, \"PeopleChecker\": 3, \"PeopleEditor\": 4, \"Calendar\": 5})\n  static ScreenRoutes = [\"/waiting\", \"/login\", \"/home\", \"/people-checker\", \"/people-editor\", \"/calendar\"]\n  constructor(props){\n    super(props)\n    this.currentScreen = App.ScreenEnum.Waiting\n    this.client = new Client()\n    this.dayEditorState = new DayEditorState(this.client.api)\n    this.groupEditorState = new GroupEditorState(this.client.api)\n    this.currentRoute = window.location.pathname\n\n    window.app = this\n\n    this.routerRef = React.createRef()\n    this.onDataChanged = this.onDataChanged.bind(this)\n    this.readSearchData()\n\n    this.clipboardRef = React.createRef()\n\n    this.theme = config.themes[0]\n    if(Cookies.get(\"theme\") && Cookies.get(\"theme\")!=\"undefined\"){\n      this.theme = Cookies.get(\"theme\")\n    }else{\n      Cookies.set(this.theme)\n    }\n  }\n\n  onDataChanged(){\n    this.forceUpdate()\n  }\n  readSearchData(){\n    searchParams.updateParams()\n    this.groupEditorState.setCurrentGroup(searchParams.group_name, this.onDataChanged)\n    this.dayEditorState.setCurrentDayTimestamp(\n      this.groupEditorState.currentGroupName, \n      searchParams.current_day_timestamp-0, this.onDataChanged)\n  }\n\n  tryToLogInWithRedirect(){\n    var canAutoLogIn = this.client.tryLoginWithCookies(success=>{\n      this.groupEditorState.setCurrentGroup(this.client.api.userCaptainGroup)\n      if(success){\n        this.goToScreen(App.ScreenEnum.Homepage)\n      }\n      else{\n        if(this.currentScreen == App.ScreenEnum.Waiting){\n          this.goToScreen(App.ScreenEnum.LogIn)\n        }\n      }\n    })\n    if(canAutoLogIn) this.goToScreen(App.ScreenEnum.Waiting)\n    else this.goToScreen(App.ScreenEnum.LogIn)\n  }\n  tryToLogInInBackground(){\n    var canAutoLogIn = this.client.tryLoginWithCookies(success=>{\n      this.forceUpdate()\n    })\n  }\n  tryToLogin(){\n    if(this.currentRoute == \"/\"){\n      this.tryToLogInWithRedirect()\n    }else{\n      this.tryToLogInInBackground()\n    }\n  }\n  componentDidMount(){\n    this.tryToLogin()\n    searchParams.updateParams()\n  }\n  \n  getScreenRoute(screen){\n    var route = \"/\"+config.sitename+App.ScreenRoutes[screen]\n    return route\n  }\n  goToScreen(screen){\n    var route = this.getScreenRoute(screen)\n    this.currentScreen = screen\n    this.currentRoute = route\n    this.goToRoute(route)\n  }\n  goToRoute(routeId, pushToHistory=true){\n    if(pushToHistory) {\n      this.routerRef.current.history.push(routeId);\n    }\n    else {\n      window.location.replace(routeId);\n    }\n    searchParams.replaceParams()\n    document.title = translate(\"app.title\") + \" - \" + routeId\n  }\n\n  showClipboardWithText(text){\n    this.clipboardRef.current.show(text)\n  }\n\n  toggleTheme(){\n    this.theme = config.themes[(config.themes.indexOf(this.theme)+1)%(config.themes.length)]\n    Cookies.set(\"theme\", this.theme)\n    this.forceUpdate()\n  }\n\n  render(){\n    return (\n      <div className={\"app theme \"+this.theme}>\n        <Router ref={this.routerRef}>\n          <Switch>\n            <Route path={this.getScreenRoute(App.ScreenEnum.Waiting)}>\n              <WaitingScreen app={this}/>\n            </Route>\n            <Route path={this.getScreenRoute(App.ScreenEnum.Homepage)}>\n              <HomepageScreen app={this}/>\n            </Route>\n            <Route path={this.getScreenRoute(App.ScreenEnum.PeopleChecker)}>\n              <PeopleCheckerScreen app={this}/>\n            </Route>\n            <Route path={this.getScreenRoute(App.ScreenEnum.PeopleEditor)}>\n              <GroupEditorScreen app={this}/>\n            </Route>\n            <Route path={\"/\"}>\n              <LogInScreen app={this}/>\n            </Route>\n          </Switch>\n        </Router>\n\n        <ClipboardPanel app={this} ref={this.clipboardRef}/>\n      </div>\n    )\n  }\n}\n\n\nexport class ClipboardPanel extends React.Component{\n  constructor(props){\n    super(props)\n    this.state = {\n      text: \"\",\n    }\n    this.handleChange = this.handleChange.bind(this);\n    this.floatingScreenRef = React.createRef()\n  }\n  show(text){\n    this.setState({\n      text: text,\n    })\n    this.floatingScreenRef.current.show()\n  }\n  hide(){\n    this.floatingScreenRef.current.hide()\n  }\n  handleChange(event) {\n    this.setState({ text: event.target.value });\n  }\n  render(){\n    return (\n      <FloatingScreen className=\"clipboard-panel\" ref={this.floatingScreenRef}>\n        <textarea value={this.state.text} onChange={this.handleChange}>\n        </textarea>\n      </FloatingScreen>\n    )\n  }\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}